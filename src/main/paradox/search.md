# Search index generation

To enable @ref:[site search](getting-started.md#site-search) you must also
generate a `search_index.json` file which contains the content of your site.
The following sections describe how to configure sbt to extract text from the
HTML files generated by Paradox.

## Project dependencies

Add the following lines to either `project/plugins.sbt` or `project/build.sbt`
so the index generator can use [jsoup] to process the HTML content and [circe]
to serialize the index to JSON.

@@ snip [project/plugins.sbt]($root$/project/plugins.sbt) { #search-dependencies }

 [jsoup]: https://jsoup.org/
 [circe]: http://circe.io/

## Add generator output to the site

Depending on whether you are using Paradox in a stand-alone fashion or sbt-site's
[Paradox generator], you need to add a line to your `build.sbt` to make the search
index part of your site.

Stand-alone Paradox
:  @@ snip [build.sbt]($root$/build.sbt) { #search-paradox }

Paradox using sbt-site
:  @@ snip [build.sbt]($root$/build.sbt) { #search-sbt-site }

 [Paradox generator]: http://www.scala-sbt.org/sbt-site/generators/paradox.html

## Generate the search index

The following code does the bulk work of reading in each HTML file to extract
the text for each header. You should place it in a file named
`project/SearchIndex.scala`.

@@ snip [project/SearchIndex.scala]($root$/project/SearchIndex.scala)
